{"version":3,"sources":["app-min.js"],"names":["host","apiVersion","Sources","ArticlesUrl","URLS","Article","title","url","description","author","urlToImage","publishedAt","Articles","source","sortBy","_articles","article","push","SourceItem","id","name","category","language","country","urlsToLogos","sortBysAvailable","UrlsToLogos","small","medium","large","SourceService","fetch","HOST","API_VERSION","SOURCES","then","response","ok","json","console","log","statusText","sourceItems","sources","catch","err","ArticleService","sourceId","headers","Headers","append","init","method","mode","cache","ARTICLES","articlesModel","articles","Add","SourceController","sourceView","sourceService","articleService","_sourceService","_articleService","_sourceView","Controller","_selectedSourceId","getSources","setSources","alert","getArticlesBySourceId","setArticles","showSources","showArticles","value","loadArticles","sourceItemTemplate","sourceItem","articleItemTemplate","SourcesView","sourcesListControl","document","getElementById","_controller","handleEvent","event","type","onSourceSelected","clearView","sourcesPanel","createElement","sourceItemElement","innerHTML","setAttribute","addEventListener","appendChild","preventDefault","sender","currentTarget","SelectedSourceId","getAttribute","articlesPanel","backElement","window","location","href","articleItemElement","sourceController","loadSources"],"mappings":"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","file":"app-min.js","sourcesContent":["// JavaScript source code\r\nconst host = \"https://newsapi.org/\",\r\n    apiVersion = \"v1/\",\r\n    Sources = \"sources/\",\r\n    ArticlesUrl = \"/articles?source=\";\r\n\r\nclass URLS\r\n{\r\n    static get HOST() {\r\n        return host;\r\n    }\r\n\r\n    static get API_VERSION() {\r\n        return apiVersion;\r\n    }\r\n\r\n    static get SOURCES() {\r\n        return Sources;\r\n    }\r\n\r\n    static get ARTICLES() {\r\n        return ArticlesUrl;\r\n    }\r\n};// Represents the single news item.\r\nclass Article {\r\n    constructor(title, url, description, author, urlToImage, publishedAt) {\r\n        this.author = author;\r\n        this.title = title;\r\n        this.description = description;\r\n        this.url = url;\r\n        this.urlToImage = urlToImage;\r\n        this.publishedAt = publishedAt;\r\n    }\r\n};// Represents the news given by source\r\nclass Articles{\r\n    constructor(source, sortBy) {\r\n        this.source = source;\r\n        this.sortBy = sortBy;\r\n        this._articles = [];\r\n    }\r\n\r\n    Add(article) {\r\n        this._articles.push(article);\r\n    }\r\n\r\n    get Articles() {\r\n        return this._articles;\r\n    }\r\n};// Represents the source\r\nclass SourceItem {\r\n    constructor(id, name, description, url, category, language, country, urlsToLogos, sortBysAvailable) {\r\n        this.id = id;\r\n        this.name = name;\r\n        this.description = description;\r\n        this.url = url;\r\n        this.category = category;\r\n        this.language = language;\r\n        this.country = country;\r\n        this.urlsToLogos = urlsToLogos;\r\n        this.sortBysAvailable = sortBysAvailable;\r\n    }\r\n};// The url to logos class\r\nclass UrlsToLogos {\r\n    constructor(small, medium, large) {\r\n        this.small = small;\r\n        this.medium = medium;\r\n        this.large = large;\r\n    }\r\n};// JavaScript source code\r\nclass SourceService {\r\n    constructor() {\r\n    }\r\n\r\n    getSources() {\r\n        return fetch(URLS.HOST + URLS.API_VERSION + URLS.SOURCES)\r\n            .then((response) => {\r\n                if (response.ok) {\r\n                    return response.json();\r\n                } else {\r\n                    console.log(response.statusText);\r\n                }\r\n            }).then(function(json) {\r\n                let sourceItems = [];\r\n                for (let source of json.sources) {\r\n                    // id, name, description, url, category, language, country, urlsToLogos, sortBysAvailable\r\n                    sourceItems.push(new SourceItem(source.id, source.name));\r\n                }\r\n\r\n                return sourceItems;\r\n            })\r\n            .catch((err) => {\r\n                console.log(err);\r\n            });\r\n    }\r\n};// The article service\r\nclass ArticleService {\r\n    constructor() {\r\n    }\r\n\r\n    getArticlesBySourceId(sourceId) {\r\n        let headers = new Headers();\r\n        headers.append(\"X-Api-Key\", \"caa2a0adb8424a32bb0a582406293aa1\");\r\n        let init = {\r\n            method: 'GET',\r\n            headers: headers,\r\n            mode: 'cors',\r\n            cache: 'default'\r\n        };\r\n        return fetch(URLS.HOST + URLS.API_VERSION + URLS.ARTICLES + sourceId, init)\r\n            .then((response) => {\r\n                if (response.ok) {\r\n                    return response.json();\r\n                } else {\r\n                    console.log(response.statusText);\r\n                }\r\n            }).then(function (json) {\r\n                let articlesModel = new Articles(json.source, json.sortBy);\r\n                for (let article of json.articles) {\r\n                    articlesModel.Add(new Article(article.title, article.url));\r\n                }\r\n                return articlesModel;\r\n            })\r\n            .catch((err) => {\r\n                console.log(err);\r\n            });\r\n    }\r\n};// The source controller\r\nclass SourceController {\r\n    constructor(sourceView, sourceService, articleService) {\r\n        this._sourceService = sourceService;\r\n        this._articleService = articleService;\r\n        this._sourceView = sourceView;\r\n        this._sourceView.Controller = this;\r\n        this._selectedSourceId = null;\r\n    }\r\n\r\n    set SelectedSourceId(value) {\r\n        if (this._selectedSourceId !== value) {\r\n            this._selectedSourceId = value;\r\n            this.loadArticles(this._selectedSourceId);\r\n        }\r\n    }\r\n\r\n    loadSources() {\r\n        return this._sourceService.getSources()\r\n            .then(sourceItems => {\r\n                if (sourceItems) {\r\n                    this.setSources(sourceItems);\r\n                } else {\r\n                    // TODO: move the alert message to constant.\r\n                    alert(\"there is no source items\");\r\n                }\r\n            }).catch(err => alert(err));\r\n    }\r\n\r\n    loadArticles(sourceId) {\r\n        this._articleService.getArticlesBySourceId(sourceId)\r\n            .then(articlesModel => {\r\n                this.setArticles(articlesModel.Articles);\r\n            })\r\n            .catch(err => alert(err));\r\n    }\r\n\r\n    setSources(sourceItems) {\r\n        this._sourceView.showSources(sourceItems);\r\n    }\r\n\r\n    setArticles(articles) {\r\n        this._sourceView.showArticles(articles);\r\n    }\r\n};// The sources view code behind\r\nconst sourceItemTemplate = sourceItem => `<div>${sourceItem.name}</div>`;\r\n\r\nconst articleItemTemplate = article => `<a href=\"${article.url}\">${article.title}</a>`;\r\n\r\nclass SourcesView\r\n{\r\n    constructor() {\r\n        this.sourcesListControl = document.getElementById(\"view\");\r\n        this._controller = null;\r\n        this.handleEvent = function (event) {\r\n            console.log(this.name); // 'Something Good', так как this является объектом Something\r\n            switch (event.type) {\r\n                case 'click':\r\n                    this.onSourceSelected(event);\r\n                    break;\r\n            }\r\n        };\r\n    }\r\n\r\n    set Controller(value) {\r\n        this._controller = value;\r\n    }\r\n\r\n    showSources(sourceItems) {\r\n        this.clearView();\r\n        let sourcesPanel = document.createElement(\"div\");\r\n        for (let sourceItem of sourceItems) {\r\n            let sourceItemElement = document.createElement(\"div\");\r\n            sourceItemElement.innerHTML = sourceItemTemplate(sourceItem);\r\n            sourceItemElement.setAttribute(\"data-source-id\", sourceItem.id);\r\n            sourceItemElement.addEventListener(\"click\", this, false);\r\n            sourcesPanel.appendChild(sourceItemElement);\r\n        }\r\n        this.sourcesListControl.appendChild(sourcesPanel);\r\n    }\r\n    \r\n    onSourceSelected(event) {\r\n        event.preventDefault();\r\n        let sender = event.currentTarget;\r\n        if (this._controller != null) {\r\n            this._controller.SelectedSourceId = sender.getAttribute(\"data-source-id\");\r\n        }\r\n    }\r\n\r\n    showArticles(articles) {\r\n        this.clearView();\r\n        let articlesPanel = document.createElement(\"div\");\r\n        let backElement = document.createElement(\"div\");\r\n        backElement.innerHTML = `<a href=\"${window.location.href}\">Back</div>`;\r\n        articlesPanel.appendChild(backElement);\r\n        for (let article of articles) {\r\n            let articleItemElement = document.createElement(\"div\");\r\n            articleItemElement.innerHTML = articleItemTemplate(article);\r\n            articlesPanel.appendChild(articleItemElement);\r\n        }\r\n\r\n        this.sourcesListControl.appendChild(articlesPanel);\r\n    }\r\n\r\n    clearView() {\r\n        this.sourcesListControl.innerHTML = \"\";\r\n    }\r\n};(function() {\r\n    let sourceController = new SourceController(new SourcesView(), new SourceService(), new ArticleService());\r\n    sourceController.loadSources();\r\n})();"]}